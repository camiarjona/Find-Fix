<mat-card *ngIf="resena" class="resena-card">
  <mat-card-header>
    <div mat-card-avatar class="avatar-resena-wrapper">
      @if (resena.fotoUrlCliente || resena.fotoUrlEspecialista) {
        <img [src]="resena.fotoUrlCliente || resena.fotoUrlEspecialista"
             class="avatar-resena-img"
             alt="Foto de perfil">
      } @else {
        <div class="avatar-resena-initials fallback-orange">
          {{ (resena.nombreCliente || resena.nombreEspecialista)?.charAt(0) }}
        </div>
      }
    </div>

    <mat-card-title>
      <span class="resena-user-name">
        {{ resena.nombreCliente || resena.nombreEspecialista }}
      </span>
    </mat-card-title>

    <mat-card-subtitle *ngIf="resena.nombreEspecialista">
      Especialista calificado
    </mat-card-subtitle>
  </mat-card-header>

  <mat-card-content>
    <div class="puntuacion-detalle">
      <div class="stars-display">
        <mat-icon *ngFor="let starStatus of getStars(resena.puntuacion); let i = index"
                  [color]="starStatus === 1 ? 'accent' : 'disabled'">
          {{ starStatus === 1 ? 'star' : 'star_border' }}
        </mat-icon>
      </div>
      <span class="rating-value">{{ resena.puntuacion }}/5</span>
    </div>

    <div class="comentario-detalle">
      <p class="comentario-text">
        <mat-icon class="quote-icon">format_quote</mat-icon>
        {{ resena.comentario }}
      </p>
    </div>
  </mat-card-content>

  <mat-card-footer>
    <small>Rese√±a ID: {{ resena.resenaId }}</small>
  </mat-card-footer>
</mat-card>
