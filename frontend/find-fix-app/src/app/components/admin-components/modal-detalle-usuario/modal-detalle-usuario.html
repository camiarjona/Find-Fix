<div class="modal-overlay" (click)="cerrar.emit()"></div>

<div class="modal-content">

  <div class="modal-header">
    <div class="modal-icon">
      <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor">
        <path stroke-linecap="round" stroke-linejoin="round"
          d="M15 9h3.75M15 12h3.75M15 15h3.75M4.5 19.5h15a2.25 2.25 0 0 0 2.25-2.25V6.75A2.25 2.25 0 0 0 19.5 4.5h-15a2.25 2.25 0 0 0-2.25 2.25v10.5A2.25 2.25 0 0 0 4.5 19.5Zm6-10.125a1.875 1.875 0 1 1-3.75 0 1.875 1.875 0 0 1 3.75 0Zm1.294 6.336a6.721 6.721 0 0 1-1.294-6.336m0 6.336a6.721 6.721 0 0 1-8.588 0" />
      </svg>
    </div>
    <h2>Ficha de Usuario</h2>
  </div>

  <ul class="detalle-lista">

    <li>
      <strong>Nombre:</strong>
      <div class="editable-container">
        @if (editingField() === 'nombre') {
        <div class="edit-mode">
          <input type="text" [(ngModel)]="tempValue" class="input-inline">
          <button class="btn-icon save" (click)="saveEdit('nombre')"><svg xmlns="http://www.w3.org/2000/svg" width="24"
              height="24" fill="#000000" viewBox="0 0 24 24">
              <path [attr.d]="icons.SAVE">
              </path>
            </svg></button>
          <button class="btn-icon cancel" (click)="cancelEdit()"><svg xmlns="http://www.w3.org/2000/svg" width="24"
              height="24" fill="#000000" viewBox="0 0 24 24">
              <path [attr.d]="icons.CANCEL">
              </path>
            </svg></button>
        </div>
        } @else {
        <div class="view-mode">
          <span>{{ usuario.nombre }}</span>
          <button class="btn-icon edit" (click)="startEdit('nombre', usuario.nombre)"><svg
              xmlns="http://www.w3.org/2000/svg" width="24" height="24" fill="#000000" viewBox="0 0 24 24">
              <path [attr.d]="icons.EDIT">
              </path>
            </svg></button>
        </div>
        }
      </div>
    </li>

    <li>
      <strong>Apellido:</strong>
      <div class="editable-container">
        @if (editingField() === 'apellido') {
        <div class="edit-mode">
          <input type="text" [(ngModel)]="tempValue" class="input-inline">
          <button class="btn-icon save" (click)="saveEdit('apellido')"><svg xmlns="http://www.w3.org/2000/svg"
              width="24" height="24" fill="#000000" viewBox="0 0 24 24">
              <path [attr.d]="icons.SAVE">
              </path>
            </svg></button>
          <button class="btn-icon cancel" (click)="cancelEdit()"><svg xmlns="http://www.w3.org/2000/svg" width="24"
              height="24" fill="#000000" viewBox="0 0 24 24">
              <path [attr.d]="icons.CANCEL">
              </path>
            </svg></button>
        </div>
        } @else {
        <div class="view-mode">
          <span>{{ usuario.apellido }}</span>
          <button class="btn-icon edit" (click)="startEdit('apellido', usuario.apellido)"><svg
              xmlns="http://www.w3.org/2000/svg" width="24" height="24" fill="#000000" viewBox="0 0 24 24">
              <path [attr.d]="icons.EDIT">
              </path>
            </svg></button>
        </div>
        }
      </div>
    </li>

    <li>
      <strong>Email:</strong>
      <span style="color: #9ca3af;">{{ usuario.email }}</span>
    </li>

    <li>
      <strong>Tel√©fono:</strong>
      <div class="editable-container">
        @if (editingField() === 'telefono') {
        <div class="edit-mode">
          <input type="text" [(ngModel)]="tempValue" class="input-inline">
          <button class="btn-icon save" (click)="saveEdit('telefono')"><svg xmlns="http://www.w3.org/2000/svg"
              width="24" height="24" fill="#000000" viewBox="0 0 24 24">
              <path [attr.d]="icons.SAVE">
              </path>
            </svg></button>
          <button class="btn-icon cancel" (click)="cancelEdit()"><svg xmlns="http://www.w3.org/2000/svg" width="24"
              height="24" fill="#000000" viewBox="0 0 24 24">
              <path [attr.d]="icons.CANCEL">
              </path>
            </svg></button>
        </div>
        } @else {
        <div class="view-mode">
          <span>{{ usuario.telefono || 'No registrado' }}</span>
          <button class="btn-icon edit" (click)="startEdit('telefono', usuario.telefono)"><svg
              xmlns="http://www.w3.org/2000/svg" width="24" height="24" fill="#000000" viewBox="0 0 24 24">
              <path [attr.d]="icons.EDIT">
              </path>
            </svg></button>
        </div>
        }
      </div>
    </li>

    <li>
      <strong>Ciudad:</strong>
      <div class="editable-container">
        @if (editingField() === 'ciudad') {
        <div class="edit-mode">
          <input type="text" [(ngModel)]="tempValue" class="input-inline">
          <button class="btn-icon save" (click)="saveEdit('ciudad')"><svg xmlns="http://www.w3.org/2000/svg" width="24"
              height="24" fill="#000000" viewBox="0 0 24 24">
              <path [attr.d]="icons.SAVE">
              </path>
            </svg></button>
          <button class="btn-icon cancel" (click)="cancelEdit()"><svg xmlns="http://www.w3.org/2000/svg" width="24"
              height="24" fill="#000000" viewBox="0 0 24 24">
              <path [attr.d]="icons.CANCEL">
              </path>
            </svg></button>
        </div>
        } @else {
        <div class="view-mode">
          <span>{{ usuario.ciudad || 'No registrada' }}</span>
          <button class="btn-icon edit" (click)="startEdit('ciudad', usuario.ciudad)"><svg
              xmlns="http://www.w3.org/2000/svg" width="24" height="24" fill="#000000" viewBox="0 0 24 24">
              <path [attr.d]="icons.EDIT">
              </path>
            </svg></button>
        </div>
        }
      </div>
    </li>

    <li>
      <strong>Roles:</strong>
      <div class="roles-container">
        @for (rol of usuario.roles; track rol) {
        <span class="status aceptado">{{ rol }}</span>
        }
      </div>
    </li>

    <li>
      <strong>Estado:</strong>
      <div>
        <span class="status" [class.rechazado]="!usuario.activo" [class.aceptado]="usuario.activo">
          {{ usuario.activo ? 'Cuenta Activa' : 'Cuenta Desactivada' }}
        </span>
      </div>
    </li>

  </ul>

  <div class="modal-actions">
    <button class="btn btn-primary" (click)="cerrar.emit()">Cerrar</button>
  </div>

</div>
